var indexMovie=(function(){var a={canvasWidth:0,canvasHeight:0,backgroundImg:new Image(),images:["../images/movie_1.jpg","../images/movie_2.jpg","../images/movie_3.jpg","../images/movie_4.jpg","../images/movie_5.jpg"],ctx:{},backgroundIndex:0,fontSize:10,text:"",texts:["在每一个清晨","有一群人怀着梦想准备奋斗着","他们相信科技可以改变世界","人们称他们是程序猿","《HTML5微周刊》感谢有你"],intervalId:""};return a}());window.indexMovie=indexMovie||{};(function(a){a.init=function(){a.loadImage();a.loadText();a.ctx=document.getElementById("canvas").getContext("2d");var c=parseInt($("#canvas").css("width").replace(/px/,""));var b=parseInt($("#canvas").css("height").replace(/px/,""));$("#canvas").attr("width",c);$("#canvas").attr("height",b);a.canvasWidth=parseInt($("#canvas").attr("width"));a.canvasHeight=parseInt($("#canvas").attr("height"));a.gameLoop();a.intervalId=setInterval(a.gameLoop,2000)};a.loadImage=function(){a.backgroundImg.src=a.images[a.backgroundIndex]};a.loadText=function(){a.text=a.texts[a.backgroundIndex]};a.gameLoop=function(){a.ctx.clearRect(0,0,a.canvasWidth,a.canvasHeight);a.ctx.save();if(a.fontSize>30){a.backgroundIndex++;a.fontSize=10}if(a.backgroundIndex>4){a.backgroundIndex=0;clearInterval(parseInt(a.intervalId));$("#indexImg").show();$("#canvas").hide()}a.loadImage();a.loadText();a.ctx.drawImage(a.backgroundImg,0,0,a.canvasWidth,a.canvasHeight);a.ctx.fillStyle="#ffffff";a.ctx.font="italic 20px sans-serif";a.ctx.textBaseline="top";a.ctx.fillText(a.text,a.canvasWidth/3,a.canvasHeight-100);a.ctx.restore();a.fontSize+=5}}(indexMovie));